<header>
	<span class="title"><h1>My Records</h1></span>
</header>
<div class="row">
	<h3>Filter</h3>  
<div class="dropdown">
	<button id="dLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Monthly Statements
		<span class="caret"></span>
	</button>
	<ul class="dropdown-menu" aria-labelledby="dLabel">
	<% @months.each do |months| %>
		<a href="/landlord/records?date=<%= months unless months.downcase == "all" %>" >	<li align="center">	<%= months %> </li> </a> 
	<% end %>
	</ul>
</div>

<h3>Revenue TYD : <%= @annual_revenue%> </h3> 
</div> 
<table class="table table-hover">
	<thead>
		<tr>
			<th>address</th>
			<th>tenant</th>
			<th>amount due</th>
			<th>amount paid</th>
			<th>due date</th>			
		</tr>
	</thead>
	<tbody>
		<% @record.each do |r|%>
		<tr>
			<td><%= r.location.address %> </td>   
			<td><%= User.find(r.tenant_id).name%> </td>   
			<td> <%= r.amount_due %> </td>   
 			<td> <%=r.amount_paid%> </td>   
			<td><%= r.date_due %> </td>  
		</tr> 
	<% end %>
	<tr>
		<td> </td>
		<td> </td>
		<td>Sub Total: </td>
		<td><%= @record.sum(:amount_paid) %> </td>
 	</tr> 
	</tbody> 
</table>

<h2>Tenants info:</h2>
<table class="table table-hover">
	<thead>
		<tr>
			<th>name</th>
			<th>address</th>
			<th>phone</th>
			<th>email</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<% @record.select(:tenant_id,:location_id).distinct.each do |r|%>
		<% a = User.find(r[:tenant_id]) %>
		<tr>
			<td><%= a.name %> </td>   
			<td><%= Location.find(r[:location_id]).address %> </td>   
			<td> <%= a.phone %> </td>   
			<td><%= a.email %> </td> 
			<td><a href="/generate_lease/<%= a.id %>"> <button class="btn btn-primary">Generate Lease </button> </a> </td> 	
		</tr> 
		<% end %>
	</tbody> 
</table>

